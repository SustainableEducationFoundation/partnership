<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
          content="The dashboard displays your ranking based on successful web-based
                                referrals engaged by your
                                partner network in your university. The more you get your network to share SEF events
                                using the
                                custom generated links, the closer your get to reaching the number one spot in our
                                Multiverse.">
    <meta name="author" content="Sustainable Education Foundation">
    <meta property="og:image" content="https://sefglobal.org/assets/img/multiverse-meta-image.png">
    <meta name="twitter:image" content="https://sefglobal.org/assets/img/multiverse-meta-image.png">
    <title>SEF Multiverse Ranking</title>
    <!-- Favicon -->
    <link href="assets/img/favicon.png" rel="icon" type="image/png">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <!-- Icons -->
    <link href="assets/vendor/nucleo/css/nucleo.css" rel="stylesheet">
    <link href="assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">

    <!-- Argon CSS -->
    <link type="text/css" href="assets/css/argon.css?v=1.0.1" rel="stylesheet">
    <!-- Global custom CSS -->
    <link type="text/css" href="assets/css/global-custom.css" rel="stylesheet">


</head>

<body>
<!--<div id="navbar"></div>-->
<header class="header-global">
    <nav id="navbar-main" class="navbar navbar-main navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand mr-lg-5" href="https://sefglobal.org">
                <img src="https://sefglobal.org/assets/img/brand/logo.png">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global"
                    aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbar_global">
                <div class="navbar-collapse-header">
                    <div class="row">
                        <div class="col-6 collapse-brand">
                            <a href="https://sefglobal.org">
                                <img src="https://sefglobal.org/assets/img/brand/logo.png">
                            </a>
                        </div>
                        <div class="col-6 collapse-close">
                            <button type="button" class="navbar-toggler" data-toggle="collapse"
                                    data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false"
                                    aria-label="Toggle navigation">
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="navbar-nav navbar-nav-hover align-items-lg-center">

                    <li class="nav-item dropdown">
                        <a href="https://sefglobal.org/" class="nav-link" role="button">
                            <i class="ni ni-ui-04 d-lg-none"></i>
                            <span class="nav-link-inner--text">Home</span>
                        </a>
                    </li>

                    <ul class="navbar-nav navbar-nav-hover align-items-lg-center">
                        <ul class="navbar-nav navbar-nav-hover align-items-lg-center">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link" data-toggle="dropdown" href="#" role="button">
                                    <i class="ni ni-ui-04 d-lg-none"></i>
                                    <span class="nav-link-inner--text">Projects</span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-xl">
                                    <div class="dropdown-menu-inner">
                                        <a href="https://sefglobal.org/onelive" class="media d-flex align-items-center">
                                            <img src="https://sefglobal.org/assets/img/brand/onelive.png"
                                                 class="rounded-circle img-center img-fluid shadow shadow-lg--hover"
                                                 style="width: 80px;">
                                            <div class="media-body ml-3">
                                                <h6 class="heading text-primary mb-md-1">Onelive</h6>
                                                <p class="description d-none d-md-inline-block mb-0">Interactive live
                                                    content.</p>
                                            </div>
                                        </a>
                                        <a href="https://sefglobal.org/scholarx"
                                           class="media d-flex align-items-center">
                                            <img src="https://sefglobal.org/assets/img/brand/scholarx.png"
                                                 class="badge-white img-center img-fluid shadow shadow-lg--hover"
                                                 style="width: 80px;">
                                            <div class="media-body ml-3">
                                                <h6 class="heading text-primary mb-md-1">ScholarX</h6>
                                                <p class="description d-none d-md-inline-block mb-0">Premium mentoring
                                                    for everyone.</p>
                                            </div>
                                        </a>
                                        <a href="#" class="media d-flex align-items-center">
                                            <img src="https://sefglobal.org/assets/img/brand/irc.png"
                                                 class="badge-white img-center img-fluid shadow shadow-lg--hover"
                                                 style="width: 80px;">
                                            <div class="media-body ml-3">
                                                <h6 class="heading text-primary mb-md-1">International Research
                                                    Council</h6>
                                                <!-- <p class="description d-none d-md-inline-block mb-0"></p> -->
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <li class="nav-item dropdown">
                            <a href="#" class="nav-link" data-toggle="dropdown" href="#" role="button">
                                <i class="ni ni-collection d-lg-none"></i>
                                <span class="nav-link-inner--text">About</span>
                            </a>
                            <div class="dropdown-menu">
                                <a href="https://sefglobal.org/about/about.html" class="dropdown-item">Who we are</a>
                                <a href="https://sefglobal.org/about/contribute.html"
                                   class="dropdown-item">Contribute</a>
                                <a href="https://sefglobal.org/about/contact.html" class="dropdown-item">Contact</a>
                                <a href="https://sefglobal.org/about/team.html" class="dropdown-item">Team</a>
                                <a href="https://sefglobal.org/about/alumni.html" class="dropdown-item">Alumni</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown">
                            <a href="https://medium.com/@SustainableEduF" class="nav-link" role="button">
                                <i class="ni ni-ui-04 d-lg-none"></i>
                                <span class="nav-link-inner--text">Blog</span>
                            </a>
                        </li>

                        <li class="nav-item dropdown">
                            <a href="https://sefglobal.org/apply" class="nav-link" role="button">
                                <i class="ni ni-ui-04 d-lg-none"></i>
                                <span class="nav-link-inner--text">Join Us</span>
                            </a>
                        </li>

                    </ul>
                </ul>
                <ul class="navbar-nav align-items-lg-center ml-lg-auto">
                    <li class="nav-item">
                        <a class="nav-link nav-link-icon"
                           href="https://www.facebook.com/sustainableeducationfoundation/" target="_blank"
                           data-toggle="tooltip" title="Like us on Facebook">
                            <i class="fa fa-facebook-square"></i>
                            <span class="nav-link-inner--text d-lg-none">Facebook</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link nav-link-icon" href="https://twitter.com/goasksef" target="_blank"
                           data-toggle="tooltip" title="Follow us on Twitter">
                            <i class="fa fa-twitter-square"></i>
                            <span class="nav-link-inner--text d-lg-none">Twitter</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link nav-link-icon" href="https://www.linkedin.com/company/sefglobal/"
                           target="_blank" data-toggle="tooltip" title="Follow us on LinkedIn">
                            <i class="fa fa-linkedin-square"></i>
                            <span class="nav-link-inner--text d-lg-none">LinkedIn</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link nav-link-icon" href="https://www.instagram.com/sefglobal/"
                           target="_blank" data-toggle="tooltip" title="Follow us on Instagram">
                            <i class="fa fa-instagram"></i>
                            <span class="nav-link-inner--text d-lg-none">Instagram</span>
                        </a>
                    </li>

                </ul>

            </div>
        </div>
    </nav>
</header>


<main>
    <section class="section pb-0">

        <div id="uniData"></div>

    </section>
</main>


<div id="footer"></div>

<!-- Core -->
<script src="assets/vendor/jquery/jquery.min.js"></script>
<script src="assets/vendor/popper/popper.min.js"></script>
<script src="assets/vendor/bootstrap/bootstrap.min.js"></script>
<script src="assets/vendor/headroom/headroom.min.js"></script>
<!--Mustache.js-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
<!-- Argon JS -->
<script src="assets/js/argon.js?v=1.0.1"></script>

<!-- Script for static navbar and footer -->
<script src="assets/js/navigation.js"></script>

<!-- Script for common functions -->
<script src="assets/js/common-functions.js"></script>


<script>
    $(function () {
        loadNavAndFooter('assets/content')  //relative path to content directory
        // link to the navbar, footer content goes here
    })
</script>


<!--Mustache template for content-->
<script type="text/html" id="templateUni">
    {{#universityData}}
    <div class="container">
        <div class="row row-grid align-items-center">
            <div class="col-lg-5 col-md-12 order-sm-1 col-xs-12">
                <div class="d-flex px-3">
                    <div class="pr-0">
                        <h1 class="display-1 mt--100 mb-5" style="line-height: 1.2;">Multiverse Ranking</h1>
                        <div class="row">
                            <div class="col-xs-12 col-sm-3 text-sm-center pl-0 pr-0">
                                <a href="#">
                                    <img src="{{imageUrl}}"
                                         class="rounded-circle" width="100%">
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-9 pl-2 pr-0">
                                <h3 class="ml-sm-3 ml-md-1 mr--100">{{name}}</h3>
                                <h6 class="ml-sm-3 ml-md-1 mr--100">Ambassador - {{ambassadorName}}</h6>
                                <h6 class="ml-sm-3 ml-md-1 mr--100"><span class="mb-2"></span><strong
                                        class="h2">{{engagement}}</strong> engagements</h6>
                                <button class="btn btn-sm btn-primary"><a href="https://sefglobal.org/multiverse/" class="text-white">University Ranking</a></button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-lg-7 col-md-12 col-sm-12 order-sm-2 ml-md-auto mt-5 d-sm-none d-md-none d-lg-block">
                <div class="position-relative pl-sm-5 pb-5 mt--100 mr--100">
                    <img src="assets/img/multiverse-01.svg" class="img-center img-fluid">
                </div>
            </div>
        </div>
    </div>
    <div class="container py-5">
        <p class="lead">Society Ranking:</p>
        {{#societies}}
        <div class="row">
            <div class="col-md-12">
                <div class="card shadow shadow-lg--hover">
                    <div class="card-body testimonial">
                        <div class="row">
                            <div class="col-sm-1">
                                <div class="d-flex px-3 mt-3">
                                    <div class="text-center">
                                        <span class="h6 text-success">{{rank}}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-9">
                                <div class="row text-left">
                                    <div class="col-sm-12">
                                        <div class="d-flex">
                                            <a href="#" class="h6 text-success">{{name}}</a>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                    <span class="progress-wrapper">
                                        <span class="progress">
                                            <span class="progress-bar bg-default" role="progressbar"
                                                  aria-valuenow="{{percentage}}" aria-valuemin="0"
                                                  aria-valuemax="100"
                                                  style="width: {{percentage}}%;"></span>
                                        </span>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="d-flex px-3 mt-3">
                                    <div class="text-right">
                                        <span class="h6 text-success" style="margin-bottom: 0;">{{engagement}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        {{/societies}}
    </div>
    {{/universityData}}
</script>


<!--Script for load Alumni data-->
<script>
    const id = getUrlParameter('id');

    $.ajax({
        type: 'get',
        url: window.location.origin + '/invoker/open/api/partnership/v1/engagements/university/' + id,
        dataType: 'json',
        success: function (data) {

            //preprocess
            function preProcessData(data) {

                //get total engagement
                let totalEngagement = 0;
                let totalSocieties = 0;
                data.societies.forEach(function (item) {
                    totalEngagement += item.engagement;
                    totalSocieties += 1;
                });

                data.totalSocieties = totalSocieties;


                //append rank and percentage
                data.societies.forEach(function (item) {
                    item.rank = data.societies.indexOf(item) + 1;
                    item.percentage = item.engagement * 100 / totalEngagement;
                });

                return data;
            }

            let preProcessedData = preProcessData(data);

            let content = Mustache.render($("#templateUni").html(), {"universityData": preProcessedData});
            $("#uniData").html(content);

            console.log(preProcessedData);

        }
    })
</script>

</body>

</html>
